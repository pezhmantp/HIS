<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Visit page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link th:href="@{/static/styles/header.css}" rel="stylesheet" />
    <link th:href="@{/static/styles/visit.css}" rel="stylesheet"/>
</head>
<header>
  <div th:replace="~{fragments.html :: header(navbarTitle='Visit')}"/>
</header>
<body>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
        crossorigin="anonymous"></script>
<script
        src="https://code.jquery.com/ui/1.13.3/jquery-ui.min.js"
        integrity="sha256-sw0iNNXmOJbQhYFuC9OF2kOlD5KQKe1y5lfBn4C9Sjg="
        crossorigin="anonymous"></script>
<script th:src="@{/static/js/visit.js}"></script>
<script>
    visitId = "[[${visitId}]]";
</script>

    <div class="accordion" id="accordionId">
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button fs-5" style="color:#044a95" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                    Patient Info
                </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                <div class="accordion-body" style="background-color:#f2f3fa">
<!--        Patient's info            -->
                    <div class="container">
                        <div class="row">
                            <div class="col-md-4 col-lg-3 col-sm-6 pb-3">
                                <label for="receptionIdInput" class="form-label">Reception Id</label>
                                <input type="text" th:value="${recpsRespnForJoin.receptionId}" class="form-control" disabled id="receptionIdInput" />
                            </div>
                            <div class="col-md-4 col-lg-3 col-sm-6 pb-3">
                                <label for="fullNameInput" class="form-label">Patient's full name</label>
                                <input type="text" th:value="${recpsRespnForJoin.firstName} + ' ' + ${recpsRespnForJoin.lastName}" class="form-control" disabled id="fullNameInput" />
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-6 pb-3">
                                <label for="dobInput" class="form-label">Date of birth</label>
                                <input type="text" th:value="${recpsRespnForJoin.dob}" class="form-control" disabled id="dobInput" />
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-6 pb-3">
                                <label for="genderInput" class="form-label">Gender</label>
                                <input type="text" th:value="${recpsRespnForJoin.gender}" class="form-control" disabled id="genderInput" />
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-6 pb-3">
                                <label for="emergencyInput" class="form-label">Is emergency?</label>
                                <input type="text" th:value="${recpsRespnForJoin.emergency} == true ? 'Yes' : 'No'" id="emergencyInput" disabled class="form-control disabled"/>
                            </div>
                        </div>
                        <div class="row mt-3 mb-3">
                            <div class="col-md-5">
                                <label for="descriptionInput" class="form-label">Description</label>
                                <textarea style="background-color:white" th:text="${recpsRespnForJoin.description}" class="span6 form-control" id="descriptionInput" disabled rows="2" ></textarea>
                            </div>
                        </div>
                    </div>
<!--        End of patient's info     -->
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button fs-5 collapsed" style="color:#044a95" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    Vital Signs
                </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                <div class="accordion-body" style="background-color:#f2f3fa">
<!--        Vital signs            -->
                    <div class="container">
                        <div class="row">
                            <div class="col-md-3 col-lg-2 col-sm-6 pb-3">
                                <label for="systolicInput" class="form-label">Systolic</label>
                                <input type="text" th:value="${recpsRespnForJoin.vitalSign.systolic}" class="form-control" disabled id="systolicInput" />
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-6 pb-3">
                                <label for="diastolicInput" class="form-label">Diastolic</label>
                                <input type="text" th:value="${recpsRespnForJoin.vitalSign.diastolic}" class="form-control" disabled id="diastolicInput" />
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-6 pb-3">
                                <label for="temperatureInput" class="form-label">Temperature</label>
                                <input type="text" th:value="${recpsRespnForJoin.vitalSign.temperature}" class="form-control" disabled id="temperatureInput" />
                            </div>
                            <div class="col-md-3 col-lg-2 col-sm-6 pb-3">
                                <label for="bloodOxygenInput" class="form-label">Blood Oxygen</label>
                                <input type="text" th:value="${recpsRespnForJoin.vitalSign.bloodOxygen}" class="form-control" disabled id="bloodOxygenInput" />
                            </div>
                        </div>
<!--      End of vital signs       -->
                </div>
            </div>
        </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingThree">
                <button class="accordion-button fs-5 collapsed" style="color:#044a95" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    Investigation
                </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                <div class="accordion-body" style="background-color:#f2f3fa">
                    <form id="testReqForm" th:action="@{/visit/requestNewTest}" th:method="post">
                    <div class="container">
                    <div class="row">
                            <label for="testTypeDiv" class="form-label">Test type</label>
                            <div id="testTypeDiv" class="col-3">
                                <select id="testType" name="testType" class="w-100 cus-dropdown">
                                    <option th:value=null th:selected th:disabled hidden>Select</option>
                                    <option th:value="bloodTest">Blood test</option>
                                    <option th:value="urinalysisTest">Urinalysis test</option>
                                </select>
                            </div>
                            <div class="col-3">
                                <input type="hidden" name="visitId" th:value="${visitId}" id="visitId"/>
                                <input type="submit" value="Add" class="btn btn-primary" id="addTestBtn"/>
                            </div>
                    </div>
                    <div class="row">
                      <div class="col-3 alert m-2 invisible alert-danger p-2" id="alertDiv">
                            Please select a test
                      </div>
                    </div>
                    </div>
                    </form>

<!--        test list            -->
                    <div id="testTableDiv" class="invisible w-50">
                        <form id='removeTestForm' th:action='@{/visit/requestNewTest}' th:method='post'>
                        <table class="table" id="testTable">
                            <thead>
                            <tr>
                                <th>Visit Id</th>
                                <th>Test Id</th>
                                <th>Test type</th>
                                <th>Status</th>
                            </tr>
                            </thead>
                            <tbody id="tbody1">

                            </tbody>
                        </table>
                        </form>
                    </div>
<!--        end of test list            -->

                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingFour">
                <button class="accordion-button fs-5 collapsed" style="color:#044a95" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                    Prescription
                </button>
            </h2>
            <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                <div class="accordion-body" style="background-color:#f2f3fa">


                        <div class="container" id="prescriptionDiv">
                            <div class="row row-cols-auto">
                                <div class="col">
                                    <input type="button" id="addNewMedicine" class="btn btn-primary" value="Add new medicine"/>
                                </div>
                                <div class="col">
                                    <input type="button" value="Save medicine" class="btn btn-primary" disabled="disabled" id="saveMedicine"/>
                                </div>
                                <div class="col">
                                    <input type="button" value="Send prescription" class="btn btn-success" disabled="disabled" id="sendPrescription"/>
                                </div>
                            </div>
                            <div class="row row-cols-auto mt-3" id="selectedMedicinesDiv">

                            </div>

                            <div class="row mt-4 new-medicine">
                                <div class="col-3">
                                    <label for="medicineSelect" class="form-label">Medicine name</label>
                                    <div>
                                        <select id="medicineSelect" disabled class="w-100 cus-dropdown">
                                            <option th:value=null th:selected th:disabled hidden>Select</option>
                                            <option th:each="i : ${medicinesList}" th:text="${i.name}" th:value="${i.name}"></option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-4 new-medicine">
                                <div class="col-3">
                                    <label for="dosage" class="form-label">Dosage</label>
                                    <input type="text" disabled class="form-control" id="dosage"/>
                                </div>
                                <div class="col-3">
                                    <label for="measurementUnit" class="form-label">Tablet/mg</label>
                                    <div>
                                        <select id="measurementUnit" disabled class="cus-dropdown w-75">
                                            <option th:value=null th:selected th:disabled hidden>select</option>
                                            <option th:value="mg" >mg</option>
                                            <option th:value="tablet" >Tablet(s)</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <label for="frequency" class="form-label">Frequency</label>
                                    <input type="text" disabled class="form-control w-50" id="frequency"/>
                                </div>
                            </div>
                            <div class="row mt-3 new-medicine">
                                <div class="col-3">
                                    <label for="noOfDays" class="form-label">No of days</label>
                                    <input type="text" disabled class="form-control w-50" id="noOfDays"/>
                                </div>
                                <div class="col-7">
                                    <label for="instruction" class="form-label">Instruction</label>
                                    <input type="text" disabled class="form-control w-50" id="instruction"/>
                                </div>
                            </div>

                        </div>

                </div>
            </div>
        </div>
    </div>

<!--test result modal-->
<div class="popup-modal invisible" id="testResultModal">
    <div class="test-popup-modal p-3" id="testResultModalContent">

    </div>
</div>
<!--end-->

</body>
</html>